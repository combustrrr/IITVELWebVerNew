{% extends "base.html" %}
{% block title %}Home{% endblock %}
{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/custom_home.css') }}">

<div class="home-container">
    <section class="greeting-section">
        <h1>Welcome to the World of Electromagnetics</h1>
        <p>
            Electromagnetic Field (EM) Theory is one of the fundamental courses for both Electrical and Electronics Engineering disciplines. 
            Generally, students perceive it as a difficult course to understand and they feel that the course is abstract and too mathematical. 
            It is essential to explain the involved theory in the course through real-life practical examples and visual aids.
        </p>
        <p>
            In this virtual EM laboratory, the concepts of vector calculus and underlying theories in electrostatics, magnetostatics, and 
            time-varying electromagnetic fields are explained using field plots generated by formulae and Finite Element Method (FEM) based computations.
        </p>
    </section>

    <section class="experiments-section">
        <h2>About the Experiments</h2>
        <p>
            The serial number of the experiments is given as per the chapter numbers of [A] in which the corresponding theory appears.
        </p>
        <p>
            <strong>[A]</strong> M.N.O. Sadiku and S.V. Kulkarni, Principles of Electromagnetics, Sixth Edition, Oxford University Press, India, 2015 
            (Asian adaptation of 'M.N.O. Sadiku, Elements of Electromagnetics, Sixth International Edition, Oxford University Press').
        </p>
    </section>

    <section class="gallery-section">
        <h2>Gallery</h2>
        <div class="slideshow">
            <img id="slide" src="https://www.ee.iitb.ac.in/course/~vel/images/slide1.png" alt="Gallery Image 1" />
        </div>
    </section>

    <section class="visitor-count-section">
        <h2>Visitor Count</h2>
        <p id="visitor-count">Loading...</p>
    </section>
</div>

<script>
    const images = [
        "https://www.ee.iitb.ac.in/course/~vel/images/slide1.png",
        "https://www.ee.iitb.ac.in/course/~vel/images/slide2.png",
        "https://www.ee.iitb.ac.in/course/~vel/images/slide3.png"
    ];
    let currentIndex = 0;

    function changeImage() {
        currentIndex = (currentIndex + 1) % images.length;
        document.getElementById('slide').src = images[currentIndex];
    }

    setInterval(changeImage, 7000); // Change image every 7 seconds

    async function fetchVisitCounter() {
        try {
            const response = await fetch('/api/visit_counter');
            const data = await response.json();
            document.getElementById('visitor-count').textContent = data.visit_counter;
        } catch (error) {
            console.error('Error fetching visit counter:', error);
        }
    }

    fetchVisitCounter();
    setInterval(fetchVisitCounter, 10000); // Fetch every 10 seconds
</script>
{% endblock %}
